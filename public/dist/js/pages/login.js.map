{"version":3,"file":"login.js","sources":["pages/login.js"],"sourcesContent":["var login = {\n\n    elements: {\n        emailInput: '#email-address',\n        passwordInput: '#password',\n        loginButton: '#login-button',\n        errorMessage: '#error-message',\n        rememberMeCheckbox: '#remember-me'\n    },\n\n    processes : {\n\n        loginProcess: function() { \n            var self = login;\n            var email = $(self.elements.emailInput).val();\n            var password = $(self.elements.passwordInput).val();\n            var rememberMe = $(self.elements.rememberMeCheckbox).is(':checked');\n            var loginUrl = base_url + 'account/login-account'; // Define the login URL\n\n            $.ajax({ \n                url: loginUrl, \n                type: 'POST',\n                data: {\n                    email: email,\n                    password: password,\n                    rememberMe: rememberMe\n                },\n                success: function(response) {\n                    // Handle successful login response\n                    console.log('Login successful:', response);\n                    self.processes.rememberMe(response.userData.email, response.userData.password); // Call rememberMe function\n\n                    if ($(self.elements.errorMessage).hasClass('is-danger')) {\n                        $(self.elements.errorMessage).removeClass('is-danger');\n                    }\n                    $(self.elements.errorMessage).addClass('is-success');\n                    $(self.elements.errorMessage).text(response.message); // Clear any previous error message\n                    setTimeout(function() {\n                        // Redirect to the desired page after a successful login\n                        window.location.href = base_url + 'roleplay/home'; // Change this to your desired URL\n                    }\n                    , 1000); // Redirect after 2 seconds\n                },\n                error: function(xhr, status, error,) {\n                    // Extract the error message from the server response\n                    var response = xhr.responseJSON || {}; // Parse JSON response if available\n                    var errorMessage = response.message || 'Login failed. Please try again.';\n\n                    // Display the error message in the error message element\n                    if ($(self.elements.errorMessage).hasClass('is-success')) {\n                        $(self.elements.errorMessage).removeClass('is-success');\n                    }\n                    $(self.elements.errorMessage).addClass('is-danger');\n                    $(self.elements.errorMessage).text(errorMessage);\n                }\n            });\n\n        },\n\n        rememberMe: function(email, password) { \n            var self = login;\n            var rememberMe = $(self.elements.rememberMeCheckbox).is(':checked');\n\n            if (rememberMe) {\n                // Logic to handle \"Remember Me\" functionality\n                // Store email and password in local storage or cookies\n                localStorage.setItem('rememberedEmail', email); \n                localStorage.setItem('rememberedPassword', password); // Uncomment if you want to remember the password too\n                localStorage.setItem('rememberMe', rememberMe);\n        \n            } else {\n                // Logic to clear \"Remember Me\" data\n                localStorage.removeItem('rememberedEmail');\n                localStorage.removeItem('rememberedPassword');\n                localStorage.removeItem('rememberMe');\n            }\n        },\n    },\n\n    onload : {\n\n        getRememberedCredentials: function() {  \n            var self = login;\n            var rememberedEmail = localStorage.getItem('rememberedEmail');\n            var rememberedPassword = localStorage.getItem('rememberedPassword');\n\n            if (rememberedEmail) {\n                $(self.elements.emailInput).val(rememberedEmail);\n            }\n            if (rememberedPassword) {\n                $(self.elements.passwordInput).val(rememberedPassword);\n            }\n\n            if (localStorage.getItem('rememberMe') === 'true') {\n                $(self.elements.rememberMeCheckbox).prop('checked', true);\n            } else {\n                $(self.elements.rememberMeCheckbox).prop('checked', false);\n            }\n        }\n\n    },\n\n    events: {\n\n        onLoginButtonClick: function() {\n\n                var self = login;\n                var loginbutton = self.elements.loginButton;\n                $(loginbutton).on('click', function(event) {\n                    event.preventDefault(); // Prevent the default form submission\n                    self.processes.loginProcess();\n                });\n        },\n\n        init: function() {\n            var self = login;\n            self.events.onLoginButtonClick();\n        }\n\n    },\n\n    init: function() {\n        var self = login;\n        self.events.init();\n        self.onload.getRememberedCredentials(); // Call the function to get remembered credentials\n        // Additional initialization code can go here\n    }\n};\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    login.init();\n});"],"names":["login","elements","emailInput","passwordInput","loginButton","errorMessage","rememberMeCheckbox","processes","loginProcess","self","email","$","val","password","rememberMe","is","loginUrl","base_url","ajax","url","type","data","success","response","console","log","userData","hasClass","removeClass","addClass","text","message","setTimeout","window","location","href","error","xhr","status","responseJSON","localStorage","setItem","removeItem","onload","getRememberedCredentials","rememberedEmail","getItem","rememberedPassword","prop","events","onLoginButtonClick","loginbutton","on","event","preventDefault","init","document","addEventListener"],"mappings":"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"}