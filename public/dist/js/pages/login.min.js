var login={elements:{emailInput:"#email-address",passwordInput:"#password",loginButton:"#login-button",errorMessage:"#error-message",rememberMeCheckbox:"#remember-me",emailIconRight:"#email-icon-right",passwordIconRight:"#password-icon-right"},processes:{loginProcess:function(){var s=login,e=$(s.elements.emailInput).val(),o=$(s.elements.passwordInput).val(),r=$(s.elements.rememberMeCheckbox).is(":checked"),a=$(s.elements.loginButton),n=$(s.elements.errorMessage),t=base_url+"account/login-account";$(a).prop("disabled",!0).addClass("is-loading"),$(n).text(""),$.ajax({url:t,type:"POST",data:{email:e,password:o,rememberMe:r},success:function(e){s.processes.handleLoginSuccess(e)},error:function(e){s.processes.handleLoginError(e)},complete:function(){$(a).prop("disabled",!1).removeClass("is-loading")}})},handleLoginSuccess:function(e){var s=login,o=$(s.elements.errorMessage);s.processes.rememberMe(e.userData.email,e.userData.password),$(o).removeClass("is-danger").addClass("is-success"),$(o).html('<span class="icon is-small has-text-success"><i class="fas fa-check-circle"></i></span> '+e.message),setTimeout(function(){window.location.href=base_url+"roleplay/home"},1e3)},handleLoginError:function(e){var s=$(login.elements.errorMessage),e=(e.responseJSON||{}).message||"Login failed. Please try again.";$(s).removeClass("is-success").addClass("is-danger"),$(s).html('<span class="icon is-small has-text-danger"><i class="fas fa-exclamation-triangle"></i></span> '+e)},rememberMe:function(e,s){var o=$(login.elements.rememberMeCheckbox).is(":checked");o?(localStorage.setItem("rememberedEmail",e),localStorage.setItem("rememberedPassword",s),localStorage.setItem("rememberMe",o)):(localStorage.removeItem("rememberedEmail"),localStorage.removeItem("rememberedPassword"),localStorage.removeItem("rememberMe"))},displayError:function(e,s){let o=$(e).next(".floating-error-tooltip");0===o.length&&(o=$('<div class="floating-error-tooltip"></div>'),$(e).after(o)),o.html(`
                <span class="icon is-large tooltip-icon">
                    <i class="fas fa-xmark fa-lg"></i>
                </span>
                <span class="tooltip-message">${s}</span>
            `);s=e[0];let r=o[0];window.FloatingUIDOM?window.FloatingUIDOM.computePosition(s,r,{placement:"right",middleware:[window.FloatingUIDOM.offset(8),window.FloatingUIDOM.shift(),window.FloatingUIDOM.flip()]}).then(({x:e,y:s})=>{Object.assign(r.style,{left:e+"px",top:s+"px",position:"absolute",zIndex:1e3})}).catch(e=>{console.error("Floating UI error:",e)}):console.error("FloatingUIDOM is not loaded."),o.addClass("is-visible")},hideError:function(e){e=$(e).next(".floating-error-tooltip");0<e.length&&e.removeClass("is-visible")}},onload:{getRememberedCredentials:function(){var e=login,s=localStorage.getItem("rememberedEmail"),o=localStorage.getItem("rememberedPassword");s&&$(e.elements.emailInput).val(s),o&&$(e.elements.passwordInput).val(o),"true"===localStorage.getItem("rememberMe")?$(e.elements.rememberMeCheckbox).prop("checked",!0):$(e.elements.rememberMeCheckbox).prop("checked",!1)}},events:{onLoginButtonClick:function(){var s=login;$(s.elements.loginButton).on("click",function(e){e.preventDefault(),s.processes.loginProcess()})},onCheckTextInputBlur:function(){var e=login,o=$(e.elements.emailInput),r=$(e.elements.passwordInput),s=$(e.elements.emailIconRight),a=$(e.elements.passwordIconRight),n=$(e.elements.loginButton);function t(){var e=""!==$(o).val().trim(),s=""!==$(r).val().trim();e&&s?n.prop("disabled",!1):n.prop("disabled",!0)}$(o).on("blur",function(){""===$(o).val().trim()?($(o).addClass("is-danger"),$(s).addClass("fa-square-xmark"),e.processes.displayError(o,"Required.")):($(o).removeClass("is-danger"),$(s).removeClass("fa-square-xmark"),e.processes.hideError(o)),t()}),$(r).on("blur",function(){""===$(r).val().trim()?($(r).addClass("is-danger"),$(a).addClass("fa-square-xmark"),e.processes.displayError(r,"Required.")):($(r).removeClass("is-danger"),$(a).removeClass("fa-square-xmark"),e.processes.hideError(r)),t()}),t()},init:function(){var e=login;e.events.onLoginButtonClick(),e.events.onCheckTextInputBlur()}},init:function(){var e=login;e.events.init(),e.onload.getRememberedCredentials()}};document.addEventListener("DOMContentLoaded",function(){login.init()});
//# sourceMappingURL=login.min.js.map
